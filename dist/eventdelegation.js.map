{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"SelectorSet\"","webpack:///./src/index.js"],"names":["bubbleEvents","WeakMap","captureEvents","propagationStopped","immediatePropagationStopped","currentTargets","currentTargetDesc","Object","getOwnPropertyDescriptor","Event","prototype","before","subject","verb","fn","source","apply","arguments","matches","selectors","target","reverse","parent","queue","node","nodeType","length","matched","observers","unshift","push","parentElement","trackPropagation","set","trackImmediate","getCurrentTarget","get","defineCurrentTarget","event","getter","defineProperty","configurable","enumerable","dispatch","events","eventPhase","selectorsEl","currentTarget","type","i","len1","j","len2","data","call","handleEvent","delete","delegation","on","el","selector","listener","options","capture","addEventListener","add","off","remove","size","removeEventListener","trigger","detail","dispatchEvent","CustomEvent","bubbles","cancelable"],"mappings":"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","file":"eventdelegation.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"SelectorSet\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"SelectorSet\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"SelectorSet\")) : factory(root[\"SelectorSet\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","import SelectorSet from 'selector-set';\r\n\r\nconst bubbleEvents = new WeakMap();\r\nconst captureEvents = new WeakMap();\r\nconst propagationStopped = new WeakMap();\r\nconst immediatePropagationStopped = new WeakMap();\r\n\r\nconst currentTargets = new WeakMap();\r\nconst currentTargetDesc = Object.getOwnPropertyDescriptor(\r\n    Event.prototype,\r\n    'currentTarget'\r\n);\r\n\r\nfunction before(subject, verb, fn) {\r\n    const source = subject[verb];\r\n    subject[verb] = function () {\r\n        fn.apply(subject, arguments);\r\n        return source.apply(subject, arguments);\r\n    };\r\n    return subject;\r\n}\r\n\r\nfunction matches(selectors, target, reverse, parent) {\r\n    const queue = [];\r\n    let node = target;\r\n\r\n    do {\r\n        if (node.nodeType !== 1)\r\n            break;\r\n        const matches = selectors.matches(node);\r\n        if (matches.length) {\r\n            const matched = { node: node, observers: matches };\r\n            if (reverse) {\r\n                queue.unshift(matched);\r\n            } else {\r\n                queue.push(matched);\r\n            }\r\n        }\r\n    } while ((node = node.parentElement) && node !== parent);\r\n\r\n    return queue;\r\n}\r\n\r\nfunction trackPropagation() {\r\n    propagationStopped.set(this, true);\r\n}\r\n\r\nfunction trackImmediate() {\r\n    propagationStopped.set(this, true);\r\n    immediatePropagationStopped.set(this, true);\r\n}\r\n\r\nfunction getCurrentTarget() {\r\n    return currentTargets.get(this) || null;\r\n}\r\n\r\nfunction defineCurrentTarget(event, getter) {\r\n    if (!currentTargetDesc) return;\r\n\r\n    Object.defineProperty(event, 'currentTarget', {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: getter || currentTargetDesc.get\r\n    });\r\n}\r\n\r\nfunction dispatch(event) {\r\n\r\n    const events = event.eventPhase === 1 ? captureEvents : bubbleEvents;\r\n\r\n    const selectorsEl = events.get(event.currentTarget);\r\n    if (!selectorsEl) {\r\n        return;\r\n    }\r\n\r\n    const selectors = selectorsEl[event.type];\r\n    if (!selectors)\r\n        return;\r\n\r\n    const queue = matches(selectors, event.target, event.eventPhase === 1, event.currentTarget);\r\n    if (!queue.length)\r\n        return;\r\n\r\n    before(event, 'stopPropagation', trackPropagation);\r\n    before(event, 'stopImmediatePropagation', trackImmediate);\r\n    defineCurrentTarget(event, getCurrentTarget);\r\n\r\n    for (let i = 0, len1 = queue.length; i < len1; i++) {\r\n        if (propagationStopped.get(event))\r\n            break;\r\n        const matched = queue[i];\r\n        currentTargets.set(event, matched.node);\r\n\r\n        for (let j = 0, len2 = matched.observers.length; j < len2; j++) {\r\n            if (immediatePropagationStopped.get(event))\r\n                break;\r\n            if (matched.observers[j].data.call) {\r\n                matched.observers[j].data.call(matched.node, event);\r\n            } else if (matched.observers[j].data.handleEvent) {\r\n                event.matched = matched.node;\r\n                matched.observers[j].data.handleEvent.call(matched.observers[j].data, event);\r\n            }\r\n        }\r\n    }\r\n\r\n    currentTargets.delete(event);\r\n    defineCurrentTarget(event);\r\n}\r\n\r\nconst delegation = {\r\n\r\n    on(el, type, selector, listener, options = {}) {\r\n        const capture = options.capture ? true : false;\r\n        const events = capture ? captureEvents : bubbleEvents;\r\n\r\n        let selectorsEl = events.get(el);\r\n        if (!selectorsEl) {\r\n            selectorsEl = {};\r\n            events.set(el, selectorsEl);\r\n        }\r\n        let selectors = selectorsEl[type];\r\n        if (!selectors) {\r\n            selectors = new SelectorSet();\r\n            selectorsEl[type] = selectors;\r\n            el.addEventListener(type, dispatch, capture);\r\n        }\r\n        selectors.add(selector, listener);\r\n    },\r\n\r\n    off(el, type, selector, listener, options = {}) {\r\n        const capture = options.capture ? true : false;\r\n        const events = capture ? captureEvents : bubbleEvents;\r\n\r\n        let selectorsEl = events.get(el);\r\n        if (!selectorsEl) {\r\n            selectorsEl = {};\r\n            events.set(el, selectorsEl);\r\n        }\r\n        let selectors = selectorsEl[type];\r\n        if (!selectors) {\r\n            return;\r\n        }\r\n        selectors.remove(selector, listener);\r\n\r\n        if (selectors.size)\r\n            return;\r\n        delete events[type];\r\n        el.removeEventListener(type, dispatch, capture);\r\n    },\r\n\r\n    trigger(target, type, detail) {\r\n        return target.dispatchEvent(\r\n            new CustomEvent(type, {\r\n                bubbles: true,\r\n                cancelable: true,\r\n                detail: detail\r\n            })\r\n        );\r\n    }\r\n};\r\n\r\nexport default delegation;"],"sourceRoot":""}